<div class="locations-overview">
    <div class="alert alert-warning" *ngIf="showDeleteConfirmation">
        <p>You are about to delete the following location:</p>
        <ul>
            <li><b>Id:</b> {{ locationToDelete.id }}</li>
            <li><b>Date:</b> {{ locationToDelete.date | date: 'dd-MM-yyyy - HH:mm' }}</li>
            <li><b>Manual:</b> {{ locationToDelete.isManual }}</li>
            <li><b>PlaceId:</b> {{ locationToDelete.placeId | nullableDisplay }}</li>
            <li><b>Lat:</b> {{ locationToDelete.lat | nullableDisplay }}</li>
            <li><b>Lon:</b> {{ locationToDelete.lon | nullableDisplay }}</li>
        </ul>

        <p>Are you sure? This action cannot be undone.</p>
        <button (click)="confirmDelete()" class="btn btn-primary confirm">Confirm</button>
        <button (click)="cancelDelete()" class="btn btn-secondary">Cancel</button>

        <div class="alert alert-danger delete-error" *ngIf="deleteError">An error occurred while deleting the location.</div>
    </div>

    <div class="alert alert-danger" *ngIf="error; else locationsTable">An error occurred while loading the location overview.</div>
    <ng-template #locationsTable>
        <p *ngIf="locations.length === 0">No locations were found.</p>
        <table *ngIf="locations.length > 0" class="table">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Date</th>
                    <th scope="col">Manual</th>
                    <th scope="col">Place Id</th>
                    <th scope="col">Lat</th>
                    <th scope="col">Lon</th>
                    <th scope="col"><bs-icon name="trash"></bs-icon></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let location of locations">
                    <td>{{ location.id }}</td>
                    <td>{{ location.date | date: 'dd-MM-yyyy - HH:mm' }}</td>
                    <td>{{ location.isManual }}</td>
                    <td>{{ location.placeId | nullableDisplay }}</td>
                    <td>{{ location.lat | nullableDisplay }}</td>
                    <td>{{ location.lon | nullableDisplay }}</td>
                    <th><bs-icon name="trash" (click)="onDelete(location)"></bs-icon></th>
                </tr>
            </tbody>
        </table>
    </ng-template>
</div>
